  <style>
    #stopWatch {
      border:2px solid #444;
      border-radius:50%;
      height:200px;
      width:200px;
      margin:20px auto;
      padding:20px;
      cursor:pointer;
    }
    #stopWatch.session.running {
      border: 2px solid #464 !important;
      color: #7d7 !important;
    }
    #stopWatch.break.running {
      border: 2px solid #166 !important;
      color: #28E8EA !important;
    }
    #options {
      height:100px;
      width:460px;
      margin:auto;
    }
    #options .option {

      height:100px;
      width:160px;
      padding:10px;
    }
    #sessTime, #brkTime {
      display:inline;
      padding:20px;
      font-size: 1.8rem;
    }
    #resetContainer {
      width:100px;
      margin:auto;
      display:inline-block;
      margin-top:60px;
    }
  </style>
<div class="container-fluid" id="projects">
  <apps-nav></apps-nav>

    <audio src="http://dev.lawlietblack.com/media/sweet.wav" id="alarm"></audio>
    <div class="container-fluid">
      <div class="text-center" id="options">
        <div class="option pull-left">
          <div class="text-center">
            <h4>Session Length</h4>
            <button class="btn btn-xs btn-danger time-select" data-method="sub-sess">
              <i class="fa fa-minus" data-method="sub-sess"></i>
            </button>
            <p id="sessTime"></p>
            <button class="btn btn-xs btn-info time-select" data-method="add-sess">
              <i class="fa fa-plus" data-method="add-sess"></i>
            </button>
          </div>
        </div>
        <div class="text-center" id="resetContainer">
          <button id="reset" class="btn btn-md btn-primary">Reset</button>
        </div>
        <div class="option pull-right">
         <div class="text-center">
            <h4>Break Length</h4>
            <button class="btn btn-xs btn-danger time-select" data-method="sub-break">
              <i class="fa fa-minus" data-method="sub-break"></i>
            </button>
            <p id="brkTime"></p>
            <button class="btn btn-xs btn-info time-select" data-method="add-break">
              <i class="fa fa-plus" data-method="add-break"></i>
            </button>
          </div>
        </div>
      </div>
      <div class="text-center session" id="stopWatch">
        <h2 id="title" style-scope>Session</h2>
        <h1 id="time" style-scope></h1>
      </div>
    </div>
  </div>  
  <script>
  $(document).ready(function() { 
    var clockRunning = false;
    var timeLeft;
    var sessionTime = 1500;
    var breakTime = 300;
    var breakClock = false;
    var seconds = sessionTime;

    //Converts seconds to MM:SS
    function filterTime(seconds) {
      var min = Math.floor(seconds/60);
      var sec = seconds%60;
      if(sec<10) {
        return min + ":0" + sec;
      } else {
        return min + ":" + sec;
      }
    }
    //renders the background fill effect with different colors for session, break, and pause
    function renderBackground() {
      var color = '#444'
      var timer = breakClock?breakTime:sessionTime;
      if(clockRunning) {
        color = breakClock?'#166':'#464';
      }
      var progress = (timer - seconds)*100/timer;
      $('#stopWatch').css('background', 'linear-gradient(to top, '+color+' 0%,'+color+' '+progress+'%,#222 '+progress+'%,#222 100%)');
    }
    //counts down till seconds = 0, then plays alarm and switches between session and break mode.
    function timer() {
      if(seconds > 0) {
        seconds -= 1;
        if(seconds === 0) {
          document.getElementById('alarm').play();
        }
      } else {
        if(!breakClock) {
          seconds = breakTime;
          $('#title').html("Break");
          $('#stopWatch').removeClass('session').addClass('break');
          breakClock = true;
        } else {
          seconds = sessionTime;
          $('#title').html("Session");
          $('#stopWatch').addClass('session').removeClass('break');
          breakClock = false;
        }
      }
      renderBackground()
      $('#time').html(filterTime(seconds));
    }
    //Initial page render
    $('#time').html(filterTime(seconds));
    $('#sessTime').html(Math.floor(seconds/60));
    $('#brkTime').html(Math.floor(breakTime/60));


    //add play/pause functionality to the stopwatch button
    $('#stopWatch').click(function() {
      if(!clockRunning) {
        timeLeft = setInterval(function() {timer()}, 1000);
        clockRunning = true;
        $(this).addClass('running');
      } else {
        clearInterval(timeLeft);
        clockRunning = false;
        $(this).removeClass('running');
      }
      renderBackground()
    });

    //reset button brings app back to session mode at full time.
    $('#reset').click(function() {
      seconds = sessionTime;
      $('#title').html("Session");
      $('#stopWatch').addClass('session').removeClass('break');
      $('#time').html(filterTime(seconds));
      breakClock = false;
      clearInterval(timeLeft);
      clockRunning = false;
      $('#stopWatch').removeClass('running');
      renderBackground()
    });


    $('body').on('click', '.time-select', function(e) {
      var method = e.target.getAttribute("data-method");
      switch(method) {
        case "add-sess": sessionTime += 60; break;
        case "sub-sess": sessionTime = sessionTime <= 60 ? 0 :sessionTime - 60;  break;
        case "add-break": breakTime += 60; break;
        case "sub-break": breakTime = breakTime <= 60 ? 0 : breakTime - 60; break;
      }
      //sets seconds to the appropriate value
      if( (breakClock && (method.indexOf("break") >= 0)) || (!breakClock && method.indexOf("sess") >= 0)) {
        seconds = breakClock ? breakTime : sessionTime;
        $('#time').html(filterTime(seconds));
      }
      $('#sessTime').html(Math.floor(sessionTime/60));
      $('#brkTime').html(Math.floor(breakTime/60));

    });
  });
  </script>